(()=>{"use strict";var e={275:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRequestSecond=t.createPoolSecond=t.createRequest=t.createPoolFirst=t.poolSecond=t.pool=void 0;const a=n(i(424));t.createPoolFirst=function(e){return r(this,void 0,void 0,(function*(){t.pool=yield new a.default.ConnectionPool(Object.assign({},e)).connect()}))},t.createRequest=function(e=null){return null==e?t.pool.request():new a.default.Request(e)},t.createPoolSecond=function(e){return r(this,void 0,void 0,(function*(){t.poolSecond=yield new a.default.ConnectionPool(Object.assign({},e)).connect()}))},t.createRequestSecond=function(e=null){return null==e?t.poolSecond.request():new a.default.Request(e)}},383:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkToken=t.token=void 0;const a=n(i(113)),s=n(i(960)),d=i(242),o=i(275);t.token=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{let i,{client_id:r,client_secret:n,grant_type:u,scope:c}=e.body,l="Bearer",_=7200,p="success";if("client_credentials"===u)if(r===process.env.TOKEN_CLIENT_ID&&n===process.env.TOKEN_CLIENT_SECRET){let e=a.default.createHmac("sha256",r+"+"+n).update(process.env.TOKEN_CLIENT_SIG).digest("base64");i=s.default.sign({message:p,result:e},{expiresIn:"2h",algorithm:"RS256"}),yield d.Transaction_Token_User.delete((0,o.createRequest)(),{user_id:"0"}),yield d.Transaction_Token_User.insert((0,o.createRequest)(),{user_id:"0",token_id:i,status:"active"})}else p="The client_id or client_secret was not correct";else p="The Client Credentials grant type is used by clients to obtain an access token outside of the context of a user.";t.send({message:p,access_token:i,token_type:l,expires_in:_,scope:c})}catch(e){i(e)}})),t.checkToken=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{t.send({status:200,message:"OK"})}catch(e){i(e)}}))},548:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.stampLog=t.creditLoan=t.creditNCB=void 0;const a=i(275),s=n(i(424)),d=n(i(517)),o=i(242);let u,c,l;function _(e){return r(this,void 0,void 0,(function*(){const t=yield(0,a.createRequest)().input("RunKey",s.default.NVarChar,e).input("KeyCode",s.default.NVarChar,e).input("CreateDate",s.default.Date,new Date).execute("sp_CreateRunning");return t?String(t.recordset[0].RunKey):null}))}t.creditNCB=(e,t)=>r(void 0,void 0,void 0,(function*(){let i=new s.default.Transaction(a.pool);try{const{developer_code:r,amount:n,is_credit:s,ncb_id:p}=e.body;l=p,yield i.begin();const f=yield o.Master_Developer.findOne((0,a.createRequest)(),{developer_code:r});if(!f)throw{status:400,message:"หักเครดิตไม่สำเร็จ ไม่พบ developer กรุณาติดต่อผู้ให้บริการ"};c=f.id;const h=yield o.Master_Credit_Balance.findOne((0,a.createRequest)(i),{developer_id:c}),y={body:e.body,before:d.default.omit(h,["id","developer_id"])};if(yield o.Transaction_Activity_Log.insert((0,a.createRequest)(i),{transaction_id:l,developer_id:c,is_credit:s,type:"หักเครดิต(ncb)",method:"post",origin:e.originalUrl,header:JSON.stringify(e.headers),body:JSON.stringify(y),description_code:"pending",description:"รอดำเนินการ",create_by:"0"}),s){const e=yield o.Master_Credit_Balance.findOne((0,a.createRequest)(),{developer_id:c});if(!e)throw{status:400,message:"หักเครดิตไม่สำเร็จ ไม่พบบัญชี Wallet กรุณาติดต่อผู้ให้บริการ"};if(!(e.total_balance>=1e3&&e.total_balance-parseInt(n)>=1e3))throw{status:400,message:"หักเครดิตไม่สำเร็จ เครดิตไม่เพียงพอ กรุณาติดต่อผู้ให้บริการ"};const r=e.total_balance-parseInt(n),s=e.total_out+parseInt(n);yield o.Master_Credit_Balance.update((0,a.createRequest)(),{total_balance:r,total_out:s,update_date:new Date},{developer_id:c}),u=yield _("O"),yield o.Transaction_Out_Log.insert((0,a.createRequest)(i),{order_code:u,type:"out",amount:n,status:"สำเร็จ",developer_id:c}),yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{referance_id:u,update_date:new Date,description_code:"success",description:"สำเร็จ",response:"{ status: 200,  message: 'หักเครดิตสำเร็จ'}",update_by:"0"},{transaction_id:l}),yield i.commit(),t.status(200).send({status:200,message:"หักเครดิตสำเร็จ"})}else yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{response:"{ status: 200, message: 'หักเครดิตสำเร็จ' }",update_date:new Date,update_by:"0",description_code:"success",description:"สำเร็จ"},{transaction_id:l}),yield i.commit(),t.status(200).send({status:200,message:"หักเครดิตสำเร็จ"})}catch(e){yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{error_message:e.message,description_code:"failed",description:"ไม่สำเร็จ",update_date:new Date},{transaction_id:l}),yield i.commit(),t.status(500|e.status).send({status:500|e.status,message:e.message})}})),t.creditLoan=(e,t)=>r(void 0,void 0,void 0,(function*(){let i=new s.default.Transaction(a.pool);try{const{developer_code:r,amount:n,is_credit:s,loan_id:p}=e.body;l=p,yield i.begin();const f=yield o.Master_Developer.findOne((0,a.createRequest)(),{developer_code:r});if(!f)throw{status:400,message:"หักเครดิตไม่สำเร็จ ไม่พบ developer กรุณาติดต่อผู้ให้บริการ"};c=f.id;const h=yield o.Master_Credit_Balance.findOne((0,a.createRequest)(i),{developer_id:c}),y={body:e.body,before:d.default.omit(h,["id","developer_id"])};if(yield o.Transaction_Activity_Log.insert((0,a.createRequest)(i),{transaction_id:l,developer_id:c,is_credit:s,type:"หักเครดิต(loan)",method:"post",origin:e.originalUrl,header:JSON.stringify(e.headers),body:JSON.stringify(y),description_code:"pending",description:"รอดำเนินการ",create_by:"0"}),s){const e=yield o.Master_Credit_Balance.findOne((0,a.createRequest)(),{developer_id:c});if(!e)throw{status:400,message:"หักเครดิตไม่สำเร็จ ไม่พบบัญชี Wallet กรุณาติดต่อผู้ให้บริการ"};if(!(e.total_balance>=1e3&&e.total_balance-parseInt(n)>=1e3))throw{status:400,message:"หักเครดิตไม่สำเร็จ เครดิตไม่เพียงพอ กรุณาติดต่อผู้ให้บริการ"};const r=e.total_balance-parseInt(n),s=e.total_out+parseInt(n);yield o.Master_Credit_Balance.update((0,a.createRequest)(),{total_balance:r,total_out:s,update_date:new Date},{developer_id:c}),u=yield _("O"),yield o.Transaction_Out_Log.insert((0,a.createRequest)(i),{order_code:u,type:"out",amount:n,status:"สำเร็จ",developer_id:c}),yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{referance_id:u,update_date:new Date,description_code:"success",description:"สำเร็จ",response:"{ status: 200,  message: 'หักเครดิตสำเร็จ'}",update_by:"0"},{transaction_id:l}),yield i.commit(),t.status(200).send({status:200,message:"หักเครดิตสำเร็จ"})}else yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{response:"{ status: 200, message: 'หักเครดิตสำเร็จ' }",update_date:new Date,update_by:"0",description_code:"success",description:"สำเร็จ"},{transaction_id:l}),yield i.commit(),t.status(200).send({status:200,message:"หักเครดิตสำเร็จ"})}catch(e){yield o.Transaction_Activity_Log.update((0,a.createRequest)(i),{error_message:e.message,description_code:"failed",description:"ไม่สำเร็จ",update_date:new Date},{transaction_id:l}),yield i.commit(),t.status(500|e.status).send({status:500|e.status,message:e.message})}})),t.stampLog=(e,t)=>r(void 0,void 0,void 0,(function*(){let i=new s.default.Transaction(a.pool);try{yield i.begin();const r=yield o.Master_Developer.findOne((0,a.createRequest)(),{developer_code:e.body[0].developer_code});for(let t in e.body)yield o.Transaction_Stamp_Log.insert((0,a.createRequest)(i),{order_code:e.body[t].order_code,type:e.body[t].type,amount:e.body[t].amount,status:"success",developer_id:r.id});yield i.commit(),t.status(200).send({status:200,message:"บันทึกสำเร็จ"})}catch(e){i&&(yield i.rollback()),t.status(500).send({status:500,message:e.message})}}))},59:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=s(i(860)),o=i(383),u=a(i(548)),c=i(821),l=d.default.Router();l.post("/credit/ncb/out",c.withOAuth,u.creditNCB),l.post("/credit/loan/out",c.withOAuth,u.creditLoan),l.post("/credit/ncb/stamp",c.withOAuth,u.stampLog),l.post("/oauth/token",o.token),l.post("/oauth/me",c.withOAuth,o.checkToken),t.default=l},45:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(860)),a=r(i(59)),s=r(i(298)),d=n.default.Router();d.use("/externals",a.default),d.use("/internals",s.default),t.default=d},563:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getModule=t.login=t.createUser=void 0;const o=i(242),u=i(275),c=d(i(96)),l=a(i(424)),_=d(i(517)),p=d(i(960)),f=i(833);function h(e){return s(this,void 0,void 0,(function*(){const t=yield(0,u.createRequest)().input("id",l.default.Int,e).query("SELECT DISTINCT t3.Id, t3.Path, t3.Name, t3.ParentId, t3.Seq\n       FROM Mapping_Role_User t1\n       INNER JOIN Mapping_Role_Module t2 ON t1.RoleId = t2.RoleId\n       INNER JOIN Master_Module t3 ON t2.ModuleId = t3.Id AND t3.Status = 'active'\n       WHERE t1.UserId = @id\n        ORDER BY t3.Seq ");return yield(0,f.snakeCaseKeys)(t.recordset)}))}t.createUser=(e,t,i)=>s(void 0,void 0,void 0,(function*(){let i=new l.default.Transaction(u.pool);try{yield i.begin();const{first_name:r,last_name:n,email:a,password:s,role_id:d}=e.body;if(yield o.Master_User.findOne((0,u.createRequest)(),{email:a}))t.status(400).send({status:400,message:"This user account already exists."});else{const e=c.default.hashSync(s,10),l=yield o.Master_User.insert((0,u.createRequest)(i),{first_name:r,last_name:n,email:a,password:e,status:"active"});yield o.Mapping_Role_User.insert((0,u.createRequest)(i),{user_id:parseInt(l),role_id:parseInt(d)}),yield i.commit(),t.status(200).send({status:200,message:"success"})}}catch(e){i&&(yield i.rollback()),t.status(500).send({status:500,message:"error"})}})),t.login=(e,t,i)=>s(void 0,void 0,void 0,(function*(){var i;let r=new l.default.Transaction(u.pool);try{yield r.begin();const{user_name:n,password:a}=e.body,s=yield(0,u.createRequest)(r).input("user",l.NVarChar,n).input("status",l.NVarChar,"active").query("\n        SELECT *\n          FROM  Master_User as u\n          LEFT JOIN  Mapping_Role_User as map on u.Id = map.UserId\n          WHERE email = @user AND Status = @status\n        "),d=(0,f.snakeCaseKeys)(s.recordset[0]);let y,m;if(d||(yield r.commit(),t.status(400).send({status:400,message:"ไม่พบผู้ใช้"})),d&&c.default.compareSync(a,d.password)){y=_.default.omit(d,["password","status","user_id","created_date","modified_date"]),m=p.default.sign(y,{expiresIn:"12h",algorithm:"RS256"}),yield o.Transaction_Token_User.insert((0,u.createRequest)(r),{user_id:null===(i=y.id)||void 0===i?void 0:i.toString(),token_id:m,status:"active"});let e=yield h(d.id);yield r.commit(),t.status(200).send({status:200,message:"success",data:{data:y,module_data:e},token:m})}else yield r.commit(),t.status(400).send({status:400,message:"ชื่อผู้ใช้ หรือ รหัสผ่าน ไม่ถูกต้อง"})}catch(e){r&&(yield r.rollback()),t.status(500).send({status:500,message:"error"})}})),t.getModule=(e,t,i)=>s(void 0,void 0,void 0,(function*(){try{const i=yield h(e.auth.id);t.status(200).send({status:200,message:"success",data:Object.assign(Object.assign({},e.auth),{module_data:i})})}catch(e){t.status(500).send({status:500,message:"error"})}}))},923:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.creditHistorys=t.historys=t.cancelCredit=t.addCredit=void 0;const a=i(833),s=i(275),d=n(i(424)),o=n(i(517)),u=i(242);let c,l;function _(e){return r(this,void 0,void 0,(function*(){const t=yield(0,s.createRequest)().input("RunKey",d.default.NVarChar,e).input("KeyCode",d.default.NVarChar,e).input("CreateDate",d.default.Date,new Date).execute("sp_CreateRunning");return t?String(t.recordset[0].RunKey):null}))}t.addCredit=(e,t)=>r(void 0,void 0,void 0,(function*(){let i=new d.default.Transaction(s.pool);try{const{user_id:r,developer_id:n,amount:a}=e.body;if(l=yield _("IN"),!l)throw{status:400,message:"Can’t generate transection id"};yield i.begin();const d=yield u.Master_Credit_Balance.findOne((0,s.createRequest)(i),{developer_id:n}),p={body:e.body,before:o.default.omit(d,["id","developer_id"])};if(yield u.Transaction_Activity_Log.insert((0,s.createRequest)(i),{transaction_id:l,developer_id:n,is_credit:!1,type:"เติมเครดิต",method:"post",origin:e.originalUrl,header:JSON.stringify(e.headers),body:JSON.stringify(p),description_code:"pending",description:"รอดำเนินการ",create_by:r}),c=yield _("I"),!c)throw{status:400,message:"Can’t generate order code"};if(yield u.Transaction_In_Log.insert((0,s.createRequest)(i),{order_code:c,developer_id:n,type:"IN",amount:a,status:"สำเร็จ"}),d){let e=d.total_balance+a,t=d.total_in+a;yield u.Master_Credit_Balance.update((0,s.createRequest)(i),{developer_id:n,total_balance:e,total_in:t,update_date:new Date},{developer_id:n})}else yield u.Master_Credit_Balance.insert((0,s.createRequest)(i),{developer_id:n,total_balance:a,total_in:a,total_out:0});yield u.Transaction_Activity_Log.update((0,s.createRequest)(i),{referance_id:c,response:"{ status: 200, message: 'add credit success' }",description_code:"success",description:"สำเร็จ",update_by:r,update_date:new Date},{transaction_id:l}),yield i.commit(),yield t.status(200).send({status:200,message:"add credit success"})}catch(e){yield u.Transaction_Activity_Log.update((0,s.createRequest)(i),{error_message:e.message,description_code:"failed",description:"ไม่สำเร็จ",update_date:new Date},{transaction_id:l}),yield i.commit(),t.status(500).send({status:500|e.status,message:e.message})}})),t.cancelCredit=(e,t)=>r(void 0,void 0,void 0,(function*(){let i=new d.default.Transaction(s.pool);try{const{order_code:r,user_id:n}=e.body;yield i.begin();const a=yield u.Transaction_In_Log.findOne((0,s.createRequest)(i),{order_code:r}),d=yield u.Master_Credit_Balance.findOne((0,s.createRequest)(i),{developer_id:a.developer_id});l=yield _("CXL");const c=yield u.Master_Credit_Balance.findOne((0,s.createRequest)(i),{developer_id:a.developer_id}),p={body:e.body,before:o.default.omit(c,["id","developer_id"])};if(yield u.Transaction_Activity_Log.insert((0,s.createRequest)(i),{transaction_id:l,developer_id:a.developer_id,is_credit:!1,type:"ยกเลิกเครดิต",method:"post",origin:e.originalUrl,header:JSON.stringify(e.headers),body:JSON.stringify(p),description_code:"pending",description:"รอดำเนินการ",create_by:n}),"ยกเลิก"===a.status)throw{status:400,message:"รายการนี้ถูกยกเลิกแล้ว"};if(!(d.total_balance>=1e3&&d.total_balance-a.amount>=1e3))throw{status:400,message:"ยกเลิกรายการไม่สำเร็จ เงินคงเหลือไม่เพียงพอ"};yield u.Transaction_In_Log.update((0,s.createRequest)(i),{status:"ยกเลิก"},{order_code:r});const f=d.total_balance-a.amount,h=d.total_in-a.amount;yield u.Master_Credit_Balance.update((0,s.createRequest)(i),{total_balance:f,total_in:h},{developer_id:a.developer_id}),yield u.Transaction_Activity_Log.update((0,s.createRequest)(i),{response:"{ status: 200, message: 'ยกเลิกการเติมเครดิต สำเร็จ' }",referance_id:r,update_date:new Date,update_by:n,description_code:"success",description:"สำเร็จ"},{transaction_id:l,developer_id:a.developer_id}),yield i.commit(),t.status(200).send({status:200,message:"ยกเลิกการเติมเครดิต สำเร็จ"})}catch(e){yield u.Transaction_Activity_Log.update((0,s.createRequest)(i),{error_message:e.message,description_code:"failed",description:"ไม่สำเร็จ",update_date:new Date},{transaction_id:l}),yield i.commit(),t.status(500|e.status).send({status:500|e.status,message:e.message})}})),t.historys=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{developer_id:i,current_page:r,per_page:n}=e.body,o=yield(0,s.createRequest)().input("id",d.default.Int,i).input("offset",d.default.Int,r||1).input("limit",d.default.Int,n||10).query("\n       SELECT ROW_NUMBER() OVER (ORDER BY log.Id) AS RowId, log.TransactionId, log.CreateDate, log.Type, log.Description, inlog.Amount\n              FROM Transaction_Activity_Log log\n              INNER JOIN Transaction_In_Log inlog ON log.ReferanceId = inlog.OrderCode\n              WHERE log.DeveloperId = @id\n              ORDER BY log.CreateDate ASC\n                  OFFSET (@offset-1)*@limit ROWS\n                  FETCH NEXT @limit ROWS ONLY\n                  SET @offset = @offset + 1\n      "),u=yield(0,s.createRequest)().input("id",d.default.Int,i).query("\n          SELECT COUNT(0) AS Total \n          FROM Transaction_Activity_Log log\n          INNER JOIN Transaction_In_Log inlog ON log.ReferanceId = inlog.OrderCode\n          WHERE log.DeveloperId = @id\n        ");t.status(200).send({total:(0,a.snakeCaseKeys)(u.recordset[0].Total),data:(0,a.snakeCaseKeys)(o.recordset)})}catch(e){t.status(500).send({status:500,message:e.message})}})),t.creditHistorys=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{developer_id:i,current_page:r,per_page:n}=e.body,o=yield(0,s.createRequest)().input("id",d.default.Int,i).input("offset",d.default.Int,r||1).input("limit",d.default.Int,n||10).query("\n        SELECT ROW_NUMBER() OVER (ORDER BY Id) AS RowId\n        , OrderCode, CreateDate, Status, Amount\n        FROM Transaction_In_Log\n          WHERE DeveloperId = @id\n          ORDER BY CreateDate ASC\n            OFFSET (@offset-1)*@limit ROWS\n            FETCH NEXT @limit ROWS ONLY\n            SET @offset = @offset + 1\n        SELECT COUNT(0) AS Total FROM Transaction_In_Log\n      "),u=yield(0,s.createRequest)().query("\n        SELECT COUNT(0) AS Total FROM Transaction_In_Log\n      ");t.status(200).send({total:(0,a.snakeCaseKeys)(u.recordset[0].Total),data:(0,a.snakeCaseKeys)(o.recordset)})}catch(e){t.status(500).send({status:500,message:e.message})}}))},17:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDeveloperDetail=t.getDevelopers=void 0;const a=i(833),s=i(275),d=n(i(424));t.getDevelopers=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{const i=yield function(){return r(this,void 0,void 0,(function*(){const e=yield(0,s.createRequest)().query(" SELECT dev.Id, dev.DeveloperCode, dev.DeveloperName, dev.DeveloperImageUrl \n            FROM  Master_Developer dev \n            WHERE IsActive = 1\n        ");return yield(0,a.snakeCaseKeys)(e.recordset)}))}();t.status(200).send({status:200,message:"success",data:Object.assign(Object.assign({},e.auth),{developer_data:i})})}catch(e){t.status(500).send({status:500,message:"error"})}})),t.getDeveloperDetail=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{const{developer_id:i}=e.body,n=yield function(e){return r(this,void 0,void 0,(function*(){const t=yield(0,s.createRequest)().input("id",d.default.Int,e).query("\n        SELECT dev.DeveloperCode, dev.DeveloperName, dev.DeveloperImageUrl,\n        balance.TotalBalance, balance.UpdateDate\n        FROM  Master_Developer dev\n        LEFT JOIN Master_Credit_Balance balance ON dev.Id = balance.DeveloperId\n          WHERE dev.Id = @id AND IsActive = 1\n    "),i=yield(0,s.createRequest)().input("id",d.default.Int,e).query("  \n        SELECT  COUNT(CASE WHEN a.DescriptionCode = 'success' THEN 1 END) AS 'success',\n                COUNT(CASE WHEN a.DescriptionCode = 'pending' THEN 1 END) AS 'pending',\n                COUNT(CASE WHEN a.DescriptionCode = 'cancel' THEN 1 END) AS 'cancel'\n        FROM Transaction_Activity_Log  a\n          WHERE a.DeveloperId = @id\n    "),r=yield(0,s.createRequest)().input("id",d.default.Int,e).query("\n      DECLARE @Counter INT = 0;\n      DECLARE @CounterDate INT = 0;\n      create table #tempped (date Date, credit int, count int);\n      \n        DECLARE @WordsCnt TABLE (credit INT, DateAdded DATETIME)\n      \n        INSERT INTO @wordsCnt(credit, DateAdded)\n        SELECT Amount, CreateDate \n        FROM Transaction_In_Log\n        WHERE CreateDate BETWEEN DATEADD(DAY, DATEDIFF(DAY, 0, DATEADD(DAY,-7, GetDate())), 0) AND GETDATE() AND Status != 'ยกเลิก' AND DeveloperId = @Id\n      \n      WHILE ( @Counter <= 6)\n      BEGIN\n        insert into #tempped (date, credit, count)\n        SELECT DATEADD(DAY,@CounterDate, GetDate()) AS date, 0 AS credit, 0 AS count\n        \n      \n          SET @Counter  = @Counter  + 1\n        SET @CounterDate  = @CounterDate  - 1\n      END\n      \n      SELECT ROW_NUMBER() OVER(ORDER BY tmp.date DESC) AS rowId,  date, SUM(credit) AS credit,SUM(count) AS count  \n      FROM (\n        SELECT date,credit, count\n        FROM #tempped\n        UNION\n        SELECT CAST(DateAdded AS DATE) as date, SUM(credit) as credit, COUNT(CAST(DateAdded AS DATE)) as 'count'\n        FROM @WordsCnt\n        group by CAST(DateAdded AS DATE)\n      \n      ) as tmp\n      GROUP BY tmp.date\n      ORDER BY tmp.date DESC\n      \n      DROP TABLE #tempped\n      "),n=yield(0,s.createRequest)().input("id",d.default.Int,e).query("\n      DECLARE @Counter INT = 0;\n      DECLARE @CounterDate INT = 0;\n      create table #tempped (date Date, credit int, count int);\n      \n        DECLARE @WordsCnt TABLE (credit INT, DateAdded DATETIME)\n      \n        INSERT INTO @wordsCnt(credit, DateAdded)\n        SELECT Amount, CreateDate \n        FROM Transaction_Out_Log\n        WHERE CreateDate BETWEEN DATEADD(DAY, DATEDIFF(DAY, 0, DATEADD(DAY,-7, GetDate())), 0) AND GETDATE() AND Status != 'ยกเลิก' AND DeveloperId = @Id\n      \n      WHILE ( @Counter <= 6)\n      BEGIN\n        insert into #tempped (date, credit, count)\n        SELECT DATEADD(DAY,@CounterDate, GetDate()) AS date, 0 AS credit, 0 AS count\n        \n      \n          SET @Counter  = @Counter  + 1\n        SET @CounterDate  = @CounterDate  - 1\n      END\n      \n      SELECT ROW_NUMBER() OVER(ORDER BY tmp.date DESC) AS rowId,  date, SUM(credit) AS credit,SUM(count) AS count  \n      FROM (\n        SELECT date,credit, count\n        FROM #tempped\n        UNION\n        SELECT CAST(DateAdded AS DATE) as date, SUM(credit) as credit, COUNT(CAST(DateAdded AS DATE)) as 'count'\n        FROM @WordsCnt\n        group by CAST(DateAdded AS DATE)\n      \n      ) as tmp\n      GROUP BY tmp.date\n      ORDER BY tmp.date DESC\n      \n      DROP TABLE #tempped\n      ");return{dev:(0,a.snakeCaseKeys)(t.recordset[0]),dashboard:{success:i.recordset[0].success,cancel:i.recordset[0].cancel,pending:i.recordset[0].pending,credit:{add:(0,a.snakeCaseKeys)(r.recordset),out:(0,a.snakeCaseKeys)(n.recordset)}}}}))}(i);t.status(200).send({status:200,message:"success",data:n})}catch(e){t.status(500).send({status:500,message:"error"})}}))},298:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const d=s(i(860)),o=a(i(563)),u=a(i(17)),c=a(i(923)),l=a(i(373)),_=i(821),p=d.default.Router();p.post("/auth/login",o.login),p.get("/auth/module",_.withAuthen,o.getModule),p.post("/auth/create-user",o.createUser),p.get("/developer/lists",_.withAuthen,u.getDevelopers),p.post("/developer/detail",_.withAuthen,u.getDeveloperDetail),p.post("/credit/in",_.withAuthen,c.addCredit),p.post("/credit/out",_.withAuthen,c.cancelCredit),p.post("/credit/history",_.withAuthen,c.historys),p.post("/credit/add/history",_.withAuthen,c.creditHistorys),p.post("/report/ncb",_.withAuthen,l.reportNcb),p.post("/report/loan",_.withAuthen,l.reportLoan),t.default=p},373:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.reportLoan=t.reportNcb=void 0;const a=i(275),s=n(i(424));t.reportNcb=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{developer_code:i,project_code:r,start_date:n,end_date:d,start_send_date:o,end_send_date:u}=e.body;let c=yield(0,a.createRequest)().query(" \n                SELECT TransactionId \n                FROM Transaction_Activity_Log\n                WHERE Type = 'หักเครดิต(ncb)' AND IsCredit = '1'\n            "),l=[];c.recordset.forEach((e=>{l.push(e.TransactionId)}));let _=yield(0,a.createRequestSecond)().input("ncb_id",s.default.NVarChar,l.join(",")).input("developer_code",s.default.NVarChar,i).input("project_code",s.default.NVarChar,r).input("start_date",s.default.NVarChar,n).input("end_date",s.default.NVarChar,d).input("start_send_date",s.default.NVarChar,o).input("end_send_date",s.default.NVarChar,u).query("\n                DECLARE @TempTable TABLE (NcbId NVARCHAR(50))\n                INSERT INTO @TempTable (NcbId) SELECT value FROM STRING_SPLIT(@ncb_id, ',')\n\n                SELECT  n.CreateDate, n.NcbId, p.DeveloperName, p.ProjectName, n.RequestParams, c.Name, n.UpdateDate, n.ReferenceId, n.NdidRequestId\n                FROM Master_Ncb  n \n                LEFT JOIN Master_Project p ON n.ProjectCode = p.ProjectCode \n                LEFT JOIN Master_Developer d ON p.DeveloperCode = d.DeveloperCode\n                LEFT JOIN Master_Ncb_Status c ON n.NcbStatusCode = c.NcbStatusCode \n                WHERE n.NcbId IN ( SELECT NcbId FROM @TempTable) \n                AND p.DeveloperCode LIKE '%' + @developer_code + '%'  \n                AND p.ProjectCode LIKE  '%' +  @project_code + '%'\n                AND CONVERT(date, n.CreateDate) BETWEEN @start_date AND @end_date\n                AND CONVERT(date, n.UpdateDate) BETWEEN @start_send_date AND @end_send_date\n                ORDER BY n.CreateDate ASC\n            "),p=[];_.recordset.forEach(((e,t)=>{let i=JSON.parse(e.RequestParams);const r=String(t+1).padStart(6,"0");p.push({no:t+1,date:e.CreateDate,ncb_id:e.NcbId,dev_name:e.DeveloperName,project_name:e.ProjectName,unit_code:"",data_type:"D",customer_no:r,customer_name:i.customer_name,customer_id:i.citizen_id,customer_phon:i.mobile_number,ncb_pay:200,ncb_commission:60,ncb_fee:140,ncb_ststus:e.Name,ncb_respond_date:e.UpdateDate,nbid:e.ReferenceId,ncb_token:"",set_id:""})}));let f=200*p.length,h=60*p.length,y=140*p.length;t.status(200).send({status:200,message:"success",export_date:new Date,sum_ncb_pay:f,sum_ncb_commission:h,sum_ncb_fee:y,data:p})}catch(e){t.status(500).send({status:e.status||500,message:e.message})}})),t.reportLoan=(e,t)=>r(void 0,void 0,void 0,(function*(){try{const{developer_code:i,project_code:r,start_date:n,end_date:d,booking_no:o,contract_no:u}=e.body;let c=yield(0,a.createRequest)().query(" \n            SELECT TransactionId, Description, CreateDate, UpdateDate \n            FROM Transaction_Activity_Log\n            WHERE Type = 'หักเครดิต(loan)' \n        "),l=[];c.recordset.forEach((e=>{l.push(e.TransactionId)}));let _=yield(0,a.createRequestSecond)().input("loan_id",s.default.NVarChar,l.join(",")).input("developer_code",s.default.NVarChar,i).input("project_code",s.default.NVarChar,r).input("start_date",s.default.NVarChar,n).input("end_date",s.default.NVarChar,d).input("booking_no",s.default.NVarChar,o).input("contract_no",s.default.NVarChar,u).query("\n                DECLARE @TempTable TABLE (LoanId NVARCHAR(50))\n                INSERT INTO @TempTable (LoanId) SELECT value FROM STRING_SPLIT(@loan_id, ',')\n\n                SELECT l2.CreateDate, l1.LoanId, u.UnitNo, l2.BookingNo, l2.ContractNo, c.CustomerIdRem, d.DeveloperName, p.ProjectName, l1.CustomerData\n                FROM Mapping_Loan l1\n                LEFT JOIN Master_Loan l2 ON l1.LoanId = l2.LoanId\n                LEFT JOIN Master_Unit u ON l2.UnitId = u.UnitId\n                LEFT JOIN Master_Customer c ON l1.CustomerId = c.CustomerId\n                LEFT JOIN Master_Developer d ON l2.DeveloperCode = d.DeveloperCode\n                LEFT JOIN Master_Project p ON l2.ProjectCode = p.ProjectCode\n                WHERE l1.LoanId IN ( SELECT LoanId FROM @TempTable)\n                    AND l1.TypeOfBorrower = 'Borrower'\n                    AND l2.DeveloperCode LIKE '%' + @developer_code + '%'\n                    AND l2.ProjectCode LIKE '%' + @project_code + '%'\n                    AND l2.BookingNo LIKE '%' + @booking_no + '%'\n                    AND l2.ContractNo LIKE '%' + @contract_no + '%'\n                    AND CONVERT(date, l2.CreateDate ) BETWEEN @start_date AND @end_date\n                    ORDER BY l2.CreateDate ASC\n                "),p=[];_.recordset.forEach(((e,t)=>{let i=JSON.parse(e.CustomerData),r=c.recordset.find((({TransactionId:t})=>t===e.LoanId));const n=new Date(r.UpdateDate);let a=n.getMonth()+1,s=n.getDate()+"/"+a+"/"+n.getFullYear(),d=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();const o=new Date(r.CreateDate);let u=o.getMonth()+1,l=o.getDate()+"/"+u+"/"+o.getFullYear();p.push({loan_no:e.LoanId,no:t+1,create_date:l,unit_no:e.UnitNo,booking_no:e.BookingNo,contract_no:e.ContractNo,customer_id_rem:e.CustomerIdRem,developer_name:e.DeveloperName,project_name:e.ProjectName,customer_name:i.customer.first_name+" "+i.customer.last_name,citizen_id:i.customer.citizen_id,mobile_number:i.customer.mobile_number,service:500,date:r.UpdateDate,pay_date:s,pay_time:d,status:r.Description})}));let f=500*p.length;t.status(200).send({status:200,message:"success",sum_service:f,data:p})}catch(e){t.status(500).send({status:e.status||500,message:e.message})}}))},372:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Mapping_Role_Module=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("role_id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{role_id:t});this.loadByData(i)}))}loadByData(e){this.role_id=e.role_id,this.module_id=e.module_id}insert(e){return u.insert(e,{role_id:this.role_id,module_id:this.module_id})}update(e){return u.update(e,{role_id:this.role_id,module_id:this.module_id},{role_id:this.role_id})}delete(e,t){return u.delete(e,{role_id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Mapping_Role_Module=u,u.builder=new o.SqlBuilder("Mapping_Role_Module",{role_id:{name:"RoleId",type:d.default.Int,is_identity:!1,is_primary:!0},module_id:{name:"ModuleId",type:d.default.Int,is_identity:!1,is_primary:!0}},[],["role_id","module_id"])},219:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Mapping_Role_User=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("role_id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{role_id:t});this.loadByData(i)}))}loadByData(e){this.role_id=e.role_id,this.user_id=e.user_id}insert(e){return u.insert(e,{role_id:this.role_id,user_id:this.user_id})}update(e){return u.update(e,{role_id:this.role_id,user_id:this.user_id},{role_id:this.role_id})}delete(e,t){return u.delete(e,{role_id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Mapping_Role_User=u,u.builder=new o.SqlBuilder("Mapping_Role_User",{role_id:{name:"RoleId",type:d.default.Int,is_identity:!1,is_primary:!0},user_id:{name:"UserId",type:d.default.Int,is_identity:!1,is_primary:!0}},[],["role_id","user_id"])},216:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Credit_Balance=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.developer_id=e.developer_id,this.total_balance=e.total_balance,this.total_in=e.total_in,this.total_out=e.total_out,this.update_date=e.update_date,this.create_date=e.create_date}insert(e){return u.insert(e,{id:this.id,developer_id:this.developer_id,total_balance:this.total_balance,total_in:this.total_in,total_out:this.total_out,update_date:this.update_date,create_date:this.create_date})}update(e){return u.update(e,{id:this.id,developer_id:this.developer_id,total_balance:this.total_balance,total_in:this.total_in,total_out:this.total_out,update_date:this.update_date,create_date:this.create_date},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Credit_Balance=u,u.builder=new o.SqlBuilder("Master_Credit_Balance",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},developer_id:{name:"DeveloperId",type:d.default.Int,is_identity:!1,is_primary:!1},total_balance:{name:"TotalBalance",type:d.default.Int,is_identity:!1,is_primary:!1},total_in:{name:"TotalIn",type:d.default.Int,is_identity:!1,is_primary:!1},total_out:{name:"TotalOut",type:d.default.Int,is_identity:!1,is_primary:!1},update_date:{name:"UpdateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1}},["id"],["id","developer_id","total_balance","total_in","total_out","update_date","create_date"])},660:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Description=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.description_code=e.description_code,this.description_text=e.description_text,this.status=e.status}insert(e){return u.insert(e,{id:this.id,description_code:this.description_code,description_text:this.description_text,status:this.status})}update(e){return u.update(e,{id:this.id,description_code:this.description_code,description_text:this.description_text,status:this.status},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Description=u,u.builder=new o.SqlBuilder("Master_Description",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},description_code:{name:"DescriptionCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},description_text:{name:"DescriptionText",type:d.default.NVarChar,is_identity:!1,is_primary:!1},status:{name:"Status",type:d.default.NVarChar,is_identity:!1,is_primary:!1}},["id"],["id","description_code","description_text","status"])},435:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Developer=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.developer_code=e.developer_code,this.developer_name=e.developer_name,this.developer_image_url=e.developer_image_url,this.url_api=e.url_api,this.header_api=e.header_api,this.is_active=e.is_active,this.create_date=e.create_date,this.update_date=e.update_date}insert(e){return u.insert(e,{id:this.id,developer_code:this.developer_code,developer_name:this.developer_name,developer_image_url:this.developer_image_url,url_api:this.url_api,header_api:this.header_api,is_active:this.is_active,create_date:this.create_date,update_date:this.update_date})}update(e){return u.update(e,{id:this.id,developer_code:this.developer_code,developer_name:this.developer_name,developer_image_url:this.developer_image_url,url_api:this.url_api,header_api:this.header_api,is_active:this.is_active,create_date:this.create_date,update_date:this.update_date},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Developer=u,u.builder=new o.SqlBuilder("Master_Developer",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},developer_code:{name:"DeveloperCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},developer_name:{name:"DeveloperName",type:d.default.NVarChar,is_identity:!1,is_primary:!1},developer_image_url:{name:"DeveloperImageUrl",type:d.default.NVarChar,is_identity:!1,is_primary:!1},url_api:{name:"UrlApi",type:d.default.NVarChar,is_identity:!1,is_primary:!1},header_api:{name:"HeaderApi",type:d.default.NVarChar,is_identity:!1,is_primary:!1},is_active:{name:"IsActive",type:d.default.Int,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},update_date:{name:"UpdateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1}},["id"],["id","developer_code","developer_name","developer_image_url","url_api","header_api","is_active","create_date","update_date"])},174:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Module=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.path=e.path,this.name=e.name,this.parent_id=e.parent_id,this.developer_id=e.developer_id,this.status=e.status,this.create_date=e.create_date,this.modify_date=e.modify_date,this.seq=e.seq}insert(e){return u.insert(e,{id:this.id,path:this.path,name:this.name,parent_id:this.parent_id,developer_id:this.developer_id,status:this.status,create_date:this.create_date,modify_date:this.modify_date,seq:this.seq})}update(e){return u.update(e,{id:this.id,path:this.path,name:this.name,parent_id:this.parent_id,developer_id:this.developer_id,status:this.status,create_date:this.create_date,modify_date:this.modify_date,seq:this.seq},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Module=u,u.builder=new o.SqlBuilder("Master_Module",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},path:{name:"Path",type:d.default.NVarChar,is_identity:!1,is_primary:!1},name:{name:"Name",type:d.default.NVarChar,is_identity:!1,is_primary:!1},parent_id:{name:"ParentId",type:d.default.Int,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:d.default.Int,is_identity:!1,is_primary:!1},status:{name:"Status",type:d.default.NVarChar,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},modify_date:{name:"ModifyDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},seq:{name:"Seq",type:d.default.Int,is_identity:!1,is_primary:!1}},["id"],["id","path","name","parent_id","developer_id","status","create_date","modify_date","seq"])},679:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Role=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.name=e.name,this.created_date=e.created_date,this.modified_date=e.modified_date,this.developer_id=e.developer_id}insert(e){return u.insert(e,{id:this.id,name:this.name,created_date:this.created_date,modified_date:this.modified_date,developer_id:this.developer_id})}update(e){return u.update(e,{id:this.id,name:this.name,created_date:this.created_date,modified_date:this.modified_date,developer_id:this.developer_id},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Role=u,u.builder=new o.SqlBuilder("Master_Role",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},name:{name:"Name",type:d.default.NVarChar,is_identity:!1,is_primary:!1},created_date:{name:"CreatedDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},modified_date:{name:"ModifiedDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:d.default.Int,is_identity:!1,is_primary:!1}},["id"],["id","name","created_date","modified_date","developer_id"])},981:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_User=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.first_name=e.first_name,this.last_name=e.last_name,this.email=e.email,this.password=e.password,this.developer_id=e.developer_id,this.created_date=e.created_date,this.modified_date=e.modified_date,this.status=e.status}insert(e){return u.insert(e,{id:this.id,first_name:this.first_name,last_name:this.last_name,email:this.email,password:this.password,developer_id:this.developer_id,created_date:this.created_date,modified_date:this.modified_date,status:this.status})}update(e){return u.update(e,{id:this.id,first_name:this.first_name,last_name:this.last_name,email:this.email,password:this.password,developer_id:this.developer_id,created_date:this.created_date,modified_date:this.modified_date,status:this.status},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_User=u,u.builder=new o.SqlBuilder("Master_User",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},first_name:{name:"FirstName",type:d.default.NVarChar,is_identity:!1,is_primary:!1},last_name:{name:"LastName",type:d.default.NVarChar,is_identity:!1,is_primary:!1},email:{name:"Email",type:d.default.NVarChar,is_identity:!1,is_primary:!1},password:{name:"Password",type:d.default.NVarChar,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:d.default.Int,is_identity:!1,is_primary:!1},created_date:{name:"CreatedDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},modified_date:{name:"ModifiedDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},status:{name:"Status",type:d.default.NVarChar,is_identity:!1,is_primary:!1}},["id"],["id","first_name","last_name","email","password","developer_id","created_date","modified_date","status"])},845:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.snakeCaseKeys=t.getWhereText=t.validateParams=t.setWhereParams=t.setRequestParams=t.SqlBuilder=void 0;const a=n(i(517)),s=n(i(424)),d=n(i(245));function o(e,t,i){a.default.forEach(t,((t,r)=>{const n=Object.assign({},i[r]);n.type==s.default.DateTime&&(n.type=s.default.NVarChar,a.default.isDate(t)&&(t=(0,d.default)(t).format("YYYY-MM-DD HH:mm:ss.SSS"))),e.input(n.name,n.type,t)}))}function u(e,t,i){a.default.forEach(t,((t,r)=>{const n=Object.assign({},i[r]);n.type==s.default.DateTime&&(n.type=s.default.NVarChar,a.default.isDate(t)&&(t=(0,d.default)(t).format("YYYY-MM-DD HH:mm:ss.SSS"))),e.input("W_"+n.name,n.type,t)}))}function c(e,t=!1,i,r){var n=a.default.keys(e);return n=a.default.intersection(n,i),t&&(n=a.default.difference(n,r)),[n,e=a.default.pick(e,n)]}function l(e,t){let i="",r=!0;return a.default.forEach(e,((e,n)=>{r&&(i+="WHERE "),i+=null==e?(r?"":"AND")+" ["+t[n].name+"] IS NULL ":(r?"":"AND")+" ["+t[n].name+"] = @W_"+t[n].name+" ",r&&(r=!1)})),i}function _(e){if(a.default.isArray(e))return e.map((e=>_(e)));if(a.default.isDate(e)||0==a.default.isObject(e))return e;var t={};return a.default.map(e,((e,i)=>{a.default.isArray(e)?t[a.default.snakeCase(i)]=a.default.map(e,(e=>_(e))):a.default.isDate(e)?t[a.default.snakeCase(i)]=e:a.default.isObject(e)?t[a.default.snakeCase(i)]=_(e):t[a.default.snakeCase(i)]=e})),t}t.SqlBuilder=class{constructor(e,t,i,r){this.init(e,t,i,r)}init(e,t,i,r){this.TABLE_NAME=e,this.SQL_COLUMN=t,this.IDENTITY_KEY=i,this.ALL_SNAKE_KEY=r}find(e,t){return r(this,void 0,void 0,(function*(){var[i,r]=c(t,!1,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),n=`\n            SELECT *\n            FROM [${this.TABLE_NAME}]\n        `;return n+=l(r,this.SQL_COLUMN),u(e,r,this.SQL_COLUMN),_((yield e.query(n)).recordset)}))}findOne(e,t){return r(this,void 0,void 0,(function*(){const i=yield this.find(e,t);return i.length>0?_(i[0]):null}))}count(e,t){return r(this,void 0,void 0,(function*(){var[i,r]=c(t,!1,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),n=`\n            SELECT COUNT(0) AS RW_LEN\n            FROM [${this.TABLE_NAME}]\n        `;n+=l(r,this.SQL_COLUMN),u(e,r,this.SQL_COLUMN);const a=yield e.query(n);return 0==a.recordset.length?0:a.recordset[0].RW_LEN}))}insert(e,t){return r(this,void 0,void 0,(function*(){var[i,r]=c(t,!0,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),n=`\n            INSERT INTO [${this.TABLE_NAME}]\n            (\n                ${i.map(((e,t)=>`[${this.SQL_COLUMN[e].name}]`))}\n            )\n            VALUES\n            (\n                ${i.map(((e,t)=>`@${this.SQL_COLUMN[e].name}`))}\n            )\n            SELECT SCOPE_IDENTITY() AS [SCOPE_IDENTITY];\n        `;o(e,r,this.SQL_COLUMN);const a=yield e.query(n);return this.IDENTITY_KEY.length>0&&a.recordset.length>0?a.recordset[0].SCOPE_IDENTITY:""}))}update(e,t,i){return r(this,void 0,void 0,(function*(){var[r,n]=c(t,!0,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),[a,s]=c(i,!1,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),d=`\n        UPDATE [${this.TABLE_NAME}]\n        SET\n            ${r.map(((e,t)=>`[${this.SQL_COLUMN[e].name}] = @${this.SQL_COLUMN[e].name}`))}\n        `;d+=l(s,this.SQL_COLUMN),o(e,n,this.SQL_COLUMN),u(e,s,this.SQL_COLUMN),yield e.query(d)}))}delete(e,t){return r(this,void 0,void 0,(function*(){var[i,r]=c(t,!1,this.ALL_SNAKE_KEY,this.IDENTITY_KEY),n=`\n        DELETE [${this.TABLE_NAME}]\n        `;n+=l(r,this.SQL_COLUMN),u(e,r,this.SQL_COLUMN),yield e.query(n)}))}},t.setRequestParams=o,t.setWhereParams=u,t.validateParams=c,t.getWhereText=l,t.snakeCaseKeys=_},701:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction_Activity_Log=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.transaction_id=e.transaction_id,this.developer_id=e.developer_id,this.referance_id=e.referance_id,this.is_credit=e.is_credit,this.type=e.type,this.method=e.method,this.origin=e.origin,this.header=e.header,this.body=e.body,this.response=e.response,this.description_code=e.description_code,this.description=e.description,this.error_message=e.error_message,this.create_date=e.create_date,this.update_date=e.update_date,this.create_by=e.create_by,this.update_by=e.update_by}insert(e){return u.insert(e,{id:this.id,transaction_id:this.transaction_id,developer_id:this.developer_id,referance_id:this.referance_id,is_credit:this.is_credit,type:this.type,method:this.method,origin:this.origin,header:this.header,body:this.body,response:this.response,description_code:this.description_code,description:this.description,error_message:this.error_message,create_date:this.create_date,update_date:this.update_date,create_by:this.create_by,update_by:this.update_by})}update(e){return u.update(e,{id:this.id,transaction_id:this.transaction_id,developer_id:this.developer_id,referance_id:this.referance_id,is_credit:this.is_credit,type:this.type,method:this.method,origin:this.origin,header:this.header,body:this.body,response:this.response,description_code:this.description_code,description:this.description,error_message:this.error_message,create_date:this.create_date,update_date:this.update_date,create_by:this.create_by,update_by:this.update_by},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Transaction_Activity_Log=u,u.builder=new o.SqlBuilder("Transaction_Activity_Log",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},transaction_id:{name:"TransactionId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:d.default.Int,is_identity:!1,is_primary:!1},referance_id:{name:"ReferanceId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},is_credit:{name:"IsCredit",type:d.default.Bit,is_identity:!1,is_primary:!1},type:{name:"Type",type:d.default.NVarChar,is_identity:!1,is_primary:!1},method:{name:"Method",type:d.default.NVarChar,is_identity:!1,is_primary:!1},origin:{name:"Origin",type:d.default.NVarChar,is_identity:!1,is_primary:!1},header:{name:"Header",type:d.default.NVarChar,is_identity:!1,is_primary:!1},body:{name:"Body",type:d.default.NVarChar,is_identity:!1,is_primary:!1},response:{name:"Response",type:d.default.NVarChar,is_identity:!1,is_primary:!1},description_code:{name:"DescriptionCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},description:{name:"Description",type:d.default.NVarChar,is_identity:!1,is_primary:!1},error_message:{name:"ErrorMessage",type:d.default.NVarChar,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},update_date:{name:"UpdateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},create_by:{name:"CreateBy",type:d.default.NVarChar,is_identity:!1,is_primary:!1},update_by:{name:"UpdateBy",type:d.default.NVarChar,is_identity:!1,is_primary:!1}},["id"],["id","transaction_id","developer_id","referance_id","is_credit","type","method","origin","header","body","response","description_code","description","error_message","create_date","update_date","create_by","update_by"])},498:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction_In_Log=void 0;const a=n(i(424)),s=i(845);class d{constructor(e){null!=e&&this.loadByData(e)}loadByData(e){this.id=e.id,this.order_code=e.order_code,this.type=e.type,this.amount=e.amount,this.create_date=e.create_date,this.status=e.status,this.developer_id=e.developer_id}insert(e){return d.insert(e,{id:this.id,order_code:this.order_code,type:this.type,amount:this.amount,create_date:this.create_date,status:this.status,developer_id:this.developer_id})}static find(e,t){return r(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new d(e)))}))}static findOne(e,t){return r(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new d(i)}))}static count(e,t){return r(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return r(this,void 0,void 0,(function*(){return this.builder.update(e,t,i)}))}static delete(e,t){return this.builder.delete(e,t)}}t.Transaction_In_Log=d,d.builder=new s.SqlBuilder("Transaction_In_Log",{id:{name:"Id",type:a.default.Int,is_identity:!0,is_primary:!1},order_code:{name:"OrderCode",type:a.default.NVarChar,is_identity:!1,is_primary:!1},type:{name:"Type",type:a.default.NVarChar,is_identity:!1,is_primary:!1},amount:{name:"Amount",type:a.default.Int,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:a.default.DateTime,is_identity:!1,is_primary:!1},status:{name:"Status",type:a.default.NVarChar,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:a.default.Int,is_identity:!1,is_primary:!1}},["id"],["id","order_code","type","amount","create_date","status","developer_id"])},840:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction_Out_Log=void 0;const a=n(i(424)),s=i(845);class d{constructor(e){null!=e&&this.loadByData(e)}loadByData(e){this.id=e.id,this.order_code=e.order_code,this.type=e.type,this.amount=e.amount,this.create_date=e.create_date,this.status=e.status,this.developer_id=e.developer_id}insert(e){return d.insert(e,{id:this.id,order_code:this.order_code,type:this.type,amount:this.amount,create_date:this.create_date,status:this.status,developer_id:this.developer_id})}static find(e,t){return r(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new d(e)))}))}static findOne(e,t){return r(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new d(i)}))}static count(e,t){return r(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Transaction_Out_Log=d,d.builder=new s.SqlBuilder("Transaction_Out_Log",{id:{name:"Id",type:a.default.Int,is_identity:!0,is_primary:!1},order_code:{name:"OrderCode",type:a.default.NVarChar,is_identity:!1,is_primary:!1},type:{name:"Type",type:a.default.NVarChar,is_identity:!1,is_primary:!1},amount:{name:"Amount",type:a.default.Int,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:a.default.DateTime,is_identity:!1,is_primary:!1},status:{name:"Status",type:a.default.NVarChar,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:a.default.Int,is_identity:!1,is_primary:!1}},["id"],["id","order_code","type","amount","create_date","status","developer_id"])},231:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction_Stamp_Log=void 0;const a=n(i(424)),s=i(845);class d{constructor(e){null!=e&&this.loadByData(e)}loadByData(e){this.id=e.id,this.order_code=e.order_code,this.type=e.type,this.amount=e.amount,this.create_date=e.create_date,this.status=e.status,this.developer_id=e.developer_id}insert(e){return d.insert(e,{id:this.id,order_code:this.order_code,type:this.type,amount:this.amount,create_date:this.create_date,status:this.status,developer_id:this.developer_id})}static find(e,t){return r(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new d(e)))}))}static findOne(e,t){return r(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new d(i)}))}static count(e,t){return r(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Transaction_Stamp_Log=d,d.builder=new s.SqlBuilder("Transaction_Stamp_Log",{id:{name:"Id",type:a.default.Int,is_identity:!0,is_primary:!1},order_code:{name:"OrderCode",type:a.default.NVarChar,is_identity:!1,is_primary:!1},type:{name:"Type",type:a.default.NVarChar,is_identity:!1,is_primary:!1},amount:{name:"Amount",type:a.default.Int,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:a.default.DateTime,is_identity:!1,is_primary:!1},status:{name:"Status",type:a.default.NVarChar,is_identity:!1,is_primary:!1},developer_id:{name:"DeveloperId",type:a.default.Int,is_identity:!1,is_primary:!1}},["id"],["id","order_code","type","amount","create_date","status","developer_id"])},788:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction_Token_User=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.user_id=e.user_id,this.token_id=e.token_id,this.status=e.status,this.create_date=e.create_date}insert(e){return u.insert(e,{id:this.id,user_id:this.user_id,token_id:this.token_id,status:this.status,create_date:this.create_date})}update(e){return u.update(e,{id:this.id,user_id:this.user_id,token_id:this.token_id,status:this.status,create_date:this.create_date},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Transaction_Token_User=u,u.builder=new o.SqlBuilder("Transaction_Token_User",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},user_id:{name:"UserId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},token_id:{name:"TokenId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},status:{name:"Status",type:d.default.NVarChar,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1}},["id"],["id","user_id","token_id","status","create_date"])},10:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t},s=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Ncb=void 0;const d=a(i(424)),o=i(845);class u{constructor(e,t){if(t){if(null==e)throw new Error("Pool request is required.");this.load(e,t)}else{if(e instanceof d.Request)throw new Error("id is required.");this.loadByData(e)}}load(e,t){return s(this,void 0,void 0,(function*(){const i=yield u.findOne(e,{id:t});this.loadByData(i)}))}loadByData(e){this.id=e.id,this.ncb_id=e.ncb_id,this.is_ncb=e.is_ncb,this.is_ncb_terms=e.is_ncb_terms,this.ncb_status_code=e.ncb_status_code,this.ncb_type=e.ncb_type,this.ncb_count=e.ncb_count,this.bank_code=e.bank_code,this.bank_mode=e.bank_mode,this.reference_id=e.reference_id,this.ndid_request_id=e.ndid_request_id,this.ndid_response=e.ndid_response,this.customer_id=e.customer_id,this.booking_no=e.booking_no,this.contract_id=e.contract_id,this.contract_no=e.contract_no,this.project_code=e.project_code,this.project_name=e.project_name,this.create_date=e.create_date,this.update_date=e.update_date,this.ncb_date_of_expiry=e.ncb_date_of_expiry,this.ndid_reference=e.ndid_reference,this.request_params=e.request_params}insert(e){return u.insert(e,{id:this.id,ncb_id:this.ncb_id,is_ncb:this.is_ncb,is_ncb_terms:this.is_ncb_terms,ncb_status_code:this.ncb_status_code,ncb_type:this.ncb_type,ncb_count:this.ncb_count,bank_code:this.bank_code,bank_mode:this.bank_mode,reference_id:this.reference_id,ndid_request_id:this.ndid_request_id,ndid_response:this.ndid_response,customer_id:this.customer_id,booking_no:this.booking_no,contract_id:this.contract_id,contract_no:this.contract_no,project_code:this.project_code,project_name:this.project_name,create_date:this.create_date,update_date:this.update_date,ncb_date_of_expiry:this.ncb_date_of_expiry,ndid_reference:this.ndid_reference,request_params:this.request_params})}update(e){return u.update(e,{id:this.id,ncb_id:this.ncb_id,is_ncb:this.is_ncb,is_ncb_terms:this.is_ncb_terms,ncb_status_code:this.ncb_status_code,ncb_type:this.ncb_type,ncb_count:this.ncb_count,bank_code:this.bank_code,bank_mode:this.bank_mode,reference_id:this.reference_id,ndid_request_id:this.ndid_request_id,ndid_response:this.ndid_response,customer_id:this.customer_id,booking_no:this.booking_no,contract_id:this.contract_id,contract_no:this.contract_no,project_code:this.project_code,project_name:this.project_name,create_date:this.create_date,update_date:this.update_date,ncb_date_of_expiry:this.ncb_date_of_expiry,ndid_reference:this.ndid_reference,request_params:this.request_params},{id:this.id})}delete(e,t){return u.delete(e,{id:t})}static find(e,t){return s(this,void 0,void 0,(function*(){return(yield this.builder.find(e,t)).map((e=>new u(e)))}))}static findOne(e,t){return s(this,void 0,void 0,(function*(){const i=yield this.builder.findOne(e,t);return null==i?null:new u(i)}))}static count(e,t){return s(this,void 0,void 0,(function*(){return yield this.builder.count(e,t)}))}static insert(e,t){return this.builder.insert(e,t)}static update(e,t,i){return this.builder.update(e,t,i)}static delete(e,t){return this.builder.delete(e,t)}}t.Master_Ncb=u,u.builder=new o.SqlBuilder("Master_Ncb",{id:{name:"Id",type:d.default.Int,is_identity:!0,is_primary:!0},ncb_id:{name:"NcbId",type:d.default.NVarChar,is_identity:!1,is_primary:!0},is_ncb:{name:"IsNcb",type:d.default.Bit,is_identity:!1,is_primary:!1},is_ncb_terms:{name:"IsNcbTerms",type:d.default.Bit,is_identity:!1,is_primary:!1},ncb_status_code:{name:"NcbStatusCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},ncb_type:{name:"NcbType",type:d.default.NVarChar,is_identity:!1,is_primary:!1},ncb_count:{name:"NcbCount",type:d.default.Int,is_identity:!1,is_primary:!1},bank_code:{name:"BankCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},bank_mode:{name:"BankMode",type:d.default.Int,is_identity:!1,is_primary:!1},reference_id:{name:"ReferenceId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},ndid_request_id:{name:"NdidRequestId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},ndid_response:{name:"NdidResponse",type:d.default.NVarChar,is_identity:!1,is_primary:!1},customer_id:{name:"CustomerId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},booking_no:{name:"BookingNo",type:d.default.NVarChar,is_identity:!1,is_primary:!1},contract_id:{name:"ContractId",type:d.default.NVarChar,is_identity:!1,is_primary:!1},contract_no:{name:"ContractNo",type:d.default.NVarChar,is_identity:!1,is_primary:!1},project_code:{name:"ProjectCode",type:d.default.NVarChar,is_identity:!1,is_primary:!1},project_name:{name:"ProjectName",type:d.default.NVarChar,is_identity:!1,is_primary:!1},create_date:{name:"CreateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},update_date:{name:"UpdateDate",type:d.default.DateTime,is_identity:!1,is_primary:!1},ncb_date_of_expiry:{name:"NcbDateOfExpiry",type:d.default.DateTime,is_identity:!1,is_primary:!1},ndid_reference:{name:"NdidReference",type:d.default.Int,is_identity:!1,is_primary:!1},request_params:{name:"RequestParams",type:d.default.NVarChar,is_identity:!1,is_primary:!1}},["id"],["id","ncb_id","is_ncb","is_ncb_terms","ncb_status_code","ncb_type","ncb_count","bank_code","bank_mode","reference_id","ndid_request_id","ndid_response","customer_id","booking_no","contract_id","contract_no","project_code","project_name","create_date","update_date","ncb_date_of_expiry","ndid_reference","request_params"])},242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Master_Ncb=t.Transaction_Token_User=t.Transaction_Stamp_Log=t.Transaction_Out_Log=t.Transaction_In_Log=t.Transaction_Activity_Log=t.Master_User=t.Master_Role=t.Master_Module=t.Master_Developer=t.Master_Description=t.Master_Credit_Balance=t.Mapping_Role_User=t.Mapping_Role_Module=void 0;const r=i(372);Object.defineProperty(t,"Mapping_Role_Module",{enumerable:!0,get:function(){return r.Mapping_Role_Module}});const n=i(219);Object.defineProperty(t,"Mapping_Role_User",{enumerable:!0,get:function(){return n.Mapping_Role_User}});const a=i(216);Object.defineProperty(t,"Master_Credit_Balance",{enumerable:!0,get:function(){return a.Master_Credit_Balance}});const s=i(660);Object.defineProperty(t,"Master_Description",{enumerable:!0,get:function(){return s.Master_Description}});const d=i(435);Object.defineProperty(t,"Master_Developer",{enumerable:!0,get:function(){return d.Master_Developer}});const o=i(174);Object.defineProperty(t,"Master_Module",{enumerable:!0,get:function(){return o.Master_Module}});const u=i(679);Object.defineProperty(t,"Master_Role",{enumerable:!0,get:function(){return u.Master_Role}});const c=i(981);Object.defineProperty(t,"Master_User",{enumerable:!0,get:function(){return c.Master_User}});const l=i(701);Object.defineProperty(t,"Transaction_Activity_Log",{enumerable:!0,get:function(){return l.Transaction_Activity_Log}});const _=i(498);Object.defineProperty(t,"Transaction_In_Log",{enumerable:!0,get:function(){return _.Transaction_In_Log}});const p=i(840);Object.defineProperty(t,"Transaction_Out_Log",{enumerable:!0,get:function(){return p.Transaction_Out_Log}});const f=i(231);Object.defineProperty(t,"Transaction_Stamp_Log",{enumerable:!0,get:function(){return f.Transaction_Stamp_Log}});const h=i(788);Object.defineProperty(t,"Transaction_Token_User",{enumerable:!0,get:function(){return h.Transaction_Token_User}});const y=i(10);Object.defineProperty(t,"Master_Ncb",{enumerable:!0,get:function(){return y.Master_Ncb}})},821:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,a){function s(e){try{o(r.next(e))}catch(e){a(e)}}function d(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withOAuth=t.withAuthen=void 0;const a=n(i(960)),s=i(275),d=i(242),o=n(i(517)),u=n(i(113));t.withAuthen=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{if(!e.headers.authorization||"Bearer"!==e.headers.authorization.split(" ")[0])throw new Error("No Token");{const t=e.headers.authorization.split(" ")[1];if(!(yield d.Transaction_Token_User.findOne((0,s.createRequest)(),{token_id:t,status:"active"})))throw new Error("Token Unavailable");{const r=a.default.verify(t,null);if(!r||!r.id)throw new Error("Token Expired");{const t=yield d.Master_User.findOne((0,s.createRequest)(),{id:r.id,status:"active"});if(!t)throw new Error("User Unavailable");e.auth=o.default.omit(t,["password","created_date","modified_date","status"]),i()}}}}catch(e){t.status(401).send({status:401,message:e.message,expired:!0})}})),t.withOAuth=(e,t,i)=>r(void 0,void 0,void 0,(function*(){try{if(!e.headers.authorization||"Bearer"!==e.headers.authorization.split(" ")[0])throw new Error("authorize error");if(!(yield d.Transaction_Token_User.findOne((0,s.createRequest)(),{token_id:e.headers.authorization.split(" ")[1]})))throw new Error("authorize error");{const t=a.default.verify(e.headers.authorization.split(" ")[1],null);if(!t||!t.result)throw new Error("authorize error");{let e=u.default.createHmac("sha256",process.env.TOKEN_CLIENT_ID+"+"+process.env.TOKEN_CLIENT_SECRET).update(process.env.TOKEN_CLIENT_SIG).digest("base64");if(t.result!==e)throw new Error("authorize error")}}i()}catch(e){t.status(401).send({code:401,error:"authorize error"})}}))},728:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(860)),a=r(i(45)),s=r(i(685)),d=r(i(142)),o=r(i(22)),u=r(i(806)),c=r(i(891)),l=r(i(582)),_=r(i(455)),p=r(i(470)),f=i(833),h=i(275),y=r(i(960)),m=r(i(822));let v;const b=d.default.config();if(b.error)throw b.error;const g=b.parsed,O=(0,n.default)();O.use((0,u.default)({crossOriginEmbedderPolicy:!1})),O.use((0,c.default)()),O.use((0,l.default)({origin:"*",methods:["GET","POST","DELETE","UPDATE","PUT","PATCH","HEAD"]})),O.use((0,_.default)()),O.use(n.default.json({limit:"20mb"})),O.use(n.default.urlencoded({extended:!0})),O.use((0,p.default)("dev")),O.use(a.default),O.use((function(e,t,i,r){if(i.headersSent)return r(e);e.status&&e.status<500?f.logger.info(e.message):e.stack?f.logger.error(e.stack):f.logger.info(e.message),i.status(e.status||500).send({error_code:e.status||500,error_message:e.message||"System error, Something went wrong"})}));const D={server:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME,requestTimeout:5e4,connectionTimeout:5e4,pool:{max:10,min:0,idleTimeoutMillis:3e4},options:{encrypt:!1,rowCollectionOnDone:!0,useUTC:!1,enableArithAbort:!0}},E={server:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME_SECOND,requestTimeout:5e4,connectionTimeout:5e4,pool:{max:10,min:0,idleTimeoutMillis:3e4},options:{encrypt:!1,rowCollectionOnDone:!0,useUTC:!1,enableArithAbort:!0}};y.default.setKeyFromPath("src/keys"),O.use("/api/statics",n.default.static(m.default.join("src","../public"))),O.use("/images",n.default.static("./images/")),Promise.all([(0,h.createPoolFirst)(D),(0,h.createPoolSecond)(E)]).then((()=>{console.log(o.default.green.inverse("Pool connected")),v=new Date,s.default.createServer(O).listen(g.PORT,(()=>{console.log(o.default.green.inverse(`Listening on port ${g.PORT}`))}))})).catch((e=>{console.log(o.default.red.inverse("Pool connect error"),e)}))},833:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.snakeCaseKeys=void 0;const s=a(i(517));n(i(572),t),t.snakeCaseKeys=e=>{if(s.default.isDate(e)||0==s.default.isObject(e))return e;function i(e){let i={};return s.default.map(e,((e,r)=>{s.default.isArray(e)?i[s.default.snakeCase(r)]=s.default.map(e,(e=>(0,t.snakeCaseKeys)(e))):s.default.isDate(e)?i[s.default.snakeCase(r)]=e:s.default.isObject(e)?i[s.default.snakeCase(r)]=(0,t.snakeCaseKeys)(e):i[s.default.snakeCase(r)]=e})),i}return s.default.isArray(e)?s.default.map(e,(e=>i(e))):i(e)}},960:function(e,t,i){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(i(147)),a=r(i(344));var s="",d="";t.default={setKey:(e,t)=>{s=e,d=t},setKeyFromPath:e=>{var t,i;s=null===(t=n.default.readFileSync(`${e}/private_key.pem`,"utf8"))||void 0===t?void 0:t.toString(),d=null===(i=n.default.readFileSync(`${e}/public_key.pem`,"utf8"))||void 0===i?void 0:i.toString()},sign:(e,t)=>a.default.sign(e,s,t),verify:(e,t)=>{try{return a.default.verify(e,d,t)}catch(e){return!1}},decode:e=>a.default.decode(e,{complete:!0})}},572:function(e,t,i){var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const s=a(i(773));t.logger=s.default.createLogger({format:s.format.combine(s.format.timestamp(),s.format.splat(),s.format.simple()),transports:[new s.default.transports.File({filename:"error.log",level:"error"}),new s.default.transports.File({filename:"combined.log",level:"info"})],exceptionHandlers:[new s.default.transports.File({filename:"exceptions.log"})]})},96:e=>{e.exports=require("bcrypt")},22:e=>{e.exports=require("chalk")},455:e=>{e.exports=require("compression")},582:e=>{e.exports=require("cors")},142:e=>{e.exports=require("dotenv")},860:e=>{e.exports=require("express")},806:e=>{e.exports=require("helmet")},344:e=>{e.exports=require("jsonwebtoken")},517:e=>{e.exports=require("lodash")},245:e=>{e.exports=require("moment")},470:e=>{e.exports=require("morgan")},424:e=>{e.exports=require("mssql")},891:e=>{e.exports=require("nocache")},773:e=>{e.exports=require("winston")},113:e=>{e.exports=require("crypto")},147:e=>{e.exports=require("fs")},685:e=>{e.exports=require("http")},822:e=>{e.exports=require("path")}},t={};!function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,i),a.exports}(728)})();